<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-144633326-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-144633326-1');
</script>

    
    <meta charset="utf-8"/>
    <title>经典刷题技巧--位操作总结1</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="keywords" content="java bit operation "/>
    


    <!-- Le styles -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/asciidoctor.css" rel="stylesheet">
    <link href="css/base.css" rel="stylesheet">
    <link href="css/prettify.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <!--<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">-->
    <link rel="shortcut icon" href="favicon.ico">
    
    
    <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?04a176dece699ead462bf191872e2da6";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

  </head>
  <body onload="prettyPrint()">
    <div id="wrap">
	
	<!-- Fixed navbar -->
    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="http://www.noteanddata.com">笔记和数据</a>
        </div>
      </div>
    </div>
    <div class="container">	<div class="row">
		<div class="col-sm-8">

			<div class="page-header">
				<h1>经典刷题技巧--位操作总结1</h1>
			</div>

			<p><em>08 February 2019</em></p>

			<p><h2><a href="#经典刷题技巧位操作总结1" id="经典刷题技巧位操作总结1">经典刷题技巧–位操作总结1</a></h2> 
<p>最近刷了几个位操作的题目, 准备单独总结一下。 感觉有些用位操作解题的技巧如果事先不知道的话， 很难临时可以想的出来。</p> 
<h2><a href="#整数的二进制表示补码" id="整数的二进制表示补码">整数的二进制表示（补码）</a></h2> 
<h3><a href="#正整数" id="正整数">正整数</a></h3> 
<p>假设以32位整数， 正数的二进制表示非常直接， 和十进制的区别就是base不同,<br> 举个例子，比如21的二进制表示是00000000000000000000000000010101<br> 从右往左数分别是1+4+16=21</p> 
<h3><a href="#负整数" id="负整数">负整数</a></h3> 
<p>负数的二进制表示用的对应正整数的按位取反然后加1，<br> 比如-21, 就是上面21先按位取反11111111111111111111111111101010<br> 然后再加1就得到-21的二进制表示11111111111111111111111111101011</p> 
<p>其中， -1的二进制表示是11111111111111111111111111111111</p> 
<h3><a href="#正负数的补码" id="正负数的补码">正负数的补码</a></h3> 
<p>这种二进制表示的方法好处是， 对于0， 二进制表示以后， 无论用正数的方法表示还是负数的方法表示都是一样的<br> 而且， 对于正数和负数，都可以统一处理；<br> 另外， 对于按位取反然后加1的操作， 从负数开始操作也是可以还原到正数的</p> 
<h2><a href="#基本位操作" id="基本位操作">基本位操作</a></h2> 
<p>在大多数编程语言(下面以java为例)中， 位操作有如下几种</p> 
<h3><a href="#左移操作-" id="左移操作-">左移操作 &lt;&lt;</a></h3> 
<h3><a href="#右移操作-" id="右移操作-">右移操作 &gt;&gt;</a></h3> 
<h3><a href="#无符号右移-" id="无符号右移-">无符号右移 &gt;&gt;&gt;</a></h3> 
<h3><a href="#按位取反compliment-" id="按位取反compliment-">按位取反(Compliment) ~</a></h3> 
<p>对于任意一位，把1变成0， 然后把0变成1</p> 
<h3><a href="#按位与and-" id="按位与and-">按位与(AND) &amp;</a></h3> 
<p>对于任意一位， 两个数都是1结果才是1， 否则就是0</p> 
<h3><a href="#按位或or-" id="按位或or-">按位或(OR) |</a></h3> 
<p>对于任意一位， 两个数有一个是1结果就是1， 否则是0</p> 
<h3><a href="#按位异或xor-" id="按位异或xor-">按位异或(XOR) ^</a></h3> 
<p>对于任意一位， 两个数不一样结果是1， 否则是0</p> 
<h2><a href="#最基本的位操作问题-求一个整数的二进制表示字符串" id="最基本的位操作问题-求一个整数的二进制表示字符串">最基本的位操作问题， 求一个整数的二进制表示字符串</a></h2> 
<p>在java里面Integer.toBinaryString()可以把一个整数直接转化成二进制字符串， 不过这个结果没有对齐到32位，<br> 如果需要对齐到32位， 可以有下面的写法。 这里前面直接补0了， 因为负数由于左边第一个符号位是1,所以一定是32位</p> 
<pre><code>public String formatBinary(int v) {
    String s = Integer.toBinaryString(v);
    StringBuilder sb = new StringBuilder();
    for(int i = 0; i &lt; 32-s.length(); ++i) {
        sb.append("0");
    }
    sb.append(s);
    return sb.toString();
}
</code></pre> 
<p>当然， 也可以直接对32位分别操作</p> 
<pre><code>public String formatBinary2(int v) {
    StringBuilder sb = new StringBuilder();
    for(int i = 31; i &gt;= 0; --i) {
        sb.append((v &gt;&gt; i) &amp; 1);
    }
    return sb.toString();
}
</code></pre> 
<h2><a href="#基本位操作问题2-求一个整数二进制表示中最右边的1" id="基本位操作问题2-求一个整数二进制表示中最右边的1">基本位操作问题2， 求一个整数二进制表示中最右边的1</a></h2> 
<p>二进制最右边的1， 就是说在这个1右边的数字都是0, 然后呢， 把这个位上的1转化成一个十进制整数表示, 也就是说<br> 如果最右边的1是在从右往左从1开始数第3位的话， 那么就返回4，<br> 比如20的二进制是00000000000000000000000000010100， 那么就返回4.</p> 
<h3><a href="#版本1" id="版本1">版本1</a></h3> 
<p>按照常规的思路， 从右往左每一位做检查， 如果遇到0就计数有几个0， 直到遇到1，<br> 然后先把左边的1都清零，最后把对应的1左移到原来的位置上</p> 
<pre><code>public int getRightMost1(int n) {
    int count = 0;
    while(count &lt; 32 &amp;&amp; (n &amp; 1) == 0) {
        count++;
        n &gt;&gt;= 1;
    }
    n = n &amp; 1;
    return n &lt;&lt; count;
}
</code></pre> 
<h3><a href="#版本2" id="版本2">版本2</a></h3> 
<p>这个版本就一行， 我当时看到就震惊了。 仔细理解了一下原理， 对于一个数的负数， 是按位取反然后加1，<br> 那么对于任何一个数的最右边10000这样的部分来说， 按位取反就是01111, 然后再加1， 又变回了10000<br> 那么， 这部分按位与， 那还是10000， 而左边的其他位， 全部都是按位取反的， 所以按位与了以后， 全部变成0了。<br> 换句话说， 按位取反以后， 加1的效果就在最右边的1开始保持和原来的正整数保持不变, 然后左边的都清零。</p> 
<pre><code>int x = x &amp; -x

</code></pre> 
<p>举例<br> 20的二进制表示: 00000000000000000000000000010100<br> 20取反的二进制: 11111111111111111111111111101011<br> -20(也就数20取反加一): 11111111111111111111111111101100<br> 所以， 20和-20做按位与以后，就变成了二进制的100,</p> 
<h3><a href="#一些错误的版本" id="一些错误的版本">一些错误的版本</a></h3> 
<p>当然， 前面这个getRightMost1(int n)代码我写的时候还是写了好几个版本有bug的</p> 
<h3><a href="#错误版本1" id="错误版本1">错误版本1</a></h3> 
<p>取到最右边的1以后， 没有把左边的1都清零</p> 
<pre><code>public int getRightMost1(int n) {
    int count = 0;
    while(count &lt; 32 &amp;&amp; (n &amp; 1) == 0) {
        count++;
        n &gt;&gt;= 1;
    }
    return n &lt;&lt; count;
}
</code></pre> 
<h3><a href="#错误版本2" id="错误版本2">错误版本2</a></h3> 
<p>这个版本对0会返回错误的结果, 应该返回0， 但是这个代码会返回1</p> 
<pre><code>public int getRightMost1(int n) {
    int count = 0;
    while(count &lt; 32 &amp;&amp; (n &amp; 1) == 0) {
        count++;
        n &gt;&gt;= 1;
    }
    int v = 1;
    v = v &lt;&lt; count;
    return v;
}
</code></pre> 
<h3><a href="#错误版本3" id="错误版本3">错误版本3</a></h3> 
<p>这个版本对0会进入死循环, 而且就算跳出循环， 最后直接从1开始左移也是不对的</p> 
<pre><code>public int getRightMost1(int n) {

        int count = 0;
        while((n &amp; 1) == 0) {
            count++;
            n &gt;&gt;= 1;
        }
        int v = 1;
        v = v &lt;&lt; count;
        return v;
    }
</code></pre> 
<h3><a href="#错误版本4" id="错误版本4">错误版本4</a></h3> 
<pre><code>public int getRightMost1(int n) {
    int count = 0;
    while((n &amp; 1) == 0) {
        count++;
        n &gt;&gt;= 1;
    }
    int v = 1;
    v = v &lt;&lt; count;
    return v;
}
</code></pre> 
<h2><a href="#血泪教训" id="血泪教训">血泪教训</a></h2> 
<p>无论写什么题目， 先把test case先列出来总是一个比较好的习惯！！！<br> 否则代码会各种bug<br> 对于整数来说， 首先要想到正整数， 0， 负整数， 最大正整数， 最小负整数</p></p>
	</div>		

<div class="col-sm-4">
  <div>
    <div >
      扫一扫关注微信公众号
    </div>
    <div>
      <img src="images/qrcode_noteanddata_258.jpg"></img>
    </div>
  </div>
  <div>
    <div> <a href="https://github.com/noteanddata" target="_blank">Github</a>
  </div>
  <div>
    <div>
      <a href="link.html?link=linode" target="_blank">Linode</a>
    </div>
    
  </div>
</div>
</div>	

	<hr />
	
		</div>
		<div id="push"></div>
    </div>
    
    <div id="footer">
      <div class="container">
      </div>
    </div>
    
    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="js/jquery-1.11.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/prettify.js"></script>
    
  </body>
</html>